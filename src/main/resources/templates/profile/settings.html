<!DOCTYPE html>

<html lang="ko" xmlns:th="https://www.thymeleaf.org">
    <head>
        <title th:text="${'IPU - '+username+' 설정'}"></title>
        <th:block th:replace="fragments/header-comp.html :: header-comp"></th:block>
        <link rel="stylesheet" type="text/css" href="/lib/profile/profile.css">
        <script src="/lib/profile/settings.js"></script>
        <meta property="og:title" content="IPU - 프로필 설정">
        <meta name="twitter:title" content="IPU - 프로필 설정">
        <meta name="description" th:content="${username+' 프로필 설정'}">
        <meta property="og:description" th:content="${username+' 프로필 설정'}">
        <meta name="twitter:description" th:content="${username+' 프로필 설정'}">
    </head>
    <body>
        <th:block th:replace="fragments/header.html :: navigation"></th:block>
        <div class="container">
            <div id="headerup">
                <h1 id="uname" th:text="${username}"></h1>
                <h3 id="uid" th:text="${userId}"></h3>
                <blockquote th:text="${bio}"></blockquote>
            </div>
            <hr style="border-top: 1px solid #ccc;">
            <span style="display: none; font-size: 1.5em; color: #f00" id="errdis"></span>
            <div id="settings-cont">
                <div class="big-cont">
                    <h2 class="big-title">일반</h2>
                    <div class="set-cont">
                        <span class="config-label">
                            <p class="field-title" style="margin-top: 0;">이름:</p>
                            <input type="text" class="input" th:value="${username}" id="name" name="name" autocomplete="nickname" placeholder="이름">
                            <p class="caption" id="nc">이 이름은 모두에게 공개됩니다. 언제든 변경할 수 있습니다.</p>
                        </span>
                    </div>
                    <div class="set-cont">
                        <span class="config-label">
                            <p  class="field-title">상태메시지:</p>
                            <textarea type="text" class="input input-ta" id="bios" name="bios" placeholder="상태메시지" th:text="${bio}"></textarea>
                            <p class="caption" id="bioc">프로필 페이지에 뜨게 되며, 언제든 변경할 수 있습니다.</p>
                        </span>
                    </div>
                    <div class="set-cont">
                        <span class="config-label">
                            <p  class="field-title">이메일:</p>
                            <input type="text" class="input" th:value="${email}" id="email" name="email" autocomplete="email" placeholder="이메일">
                            <!--
                            <p class="caption" style="text-decoration: line-through;">이메일을 설정하면 IPU에서 여러가지 알림을 보내드릴 수 있게 됩니다.<br>암호복구, 휴면계정 알림등은 이메일로 보내드립니다.</p>
                            -->
                            <p class="caption"  id="ec">이 버전의 IPU는 메일링을 지원하지 않습니다. 이 필드는 호환성 필드입니다.</p>
                        </span>
                    </div>
                </div>
                <div class="big-cont">
                    <h2 class="big-title">보안</h2>
                    <button type="button" id="changepwd" onclick="activePwd()">암호 변경</button>
                    <input type="checkbox" style="display: none;" id="pwdChange" name="hasPwdChange">
                    <div id="pwdreg" style="display: none;">
                        <div class="set-cont">
                            <span class="config-label">
                                새 암호:<br>
                                <input type="password" class="input" id="npwd" name="npwd" autocomplete="new-password" placeholder="새 암호">
                                <p class="caption" style="margin-bottom: 0;">보안을 위해 추측하기 어려운 암호를 사용하세요.</p>
                            </span>
                        </div>
                    </div>
                    <br>
                    <a type="button" id="rmAcc" href="/settings/bye">계정 삭제</a>
                </div>
                <div class="big-cont">
                    <h2 class="big-title">정보</h2>
                    <table>
                        <tr>
                            <td class="t-field">가입일</td>
                            <td class="t-field" th:text="${joined}"></td>
                        </tr>
                        <tr>
                            <td class="t-field">최종 로그인 시각</td>
                            <td class="t-field" th:text="${lastLogin}"></td>
                        </tr>
                        <tr>
                            <td class="t-field">최종 풀이 제출 시각</td>
                            <td class="t-field" th:text="${lastSolve}"></td>
                        </tr>
                        <tr>
                            <td class="t-field">사용자 UID</td>
                            <td class="t-field" th:text="${usrCd}"></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="big-cont">
                <h2 class="big-title">설정을 저장하려면 기존 암호를 입력하세요:</h2>
                <span class="config-label" style="margin-top: 20px;">
                    <input type="password" class="input" id="lpwd" name="lpwd" style="margin: 0;" autocomplete="current-password" placeholder="기존 암호">
                </span>
                <p class="caption" style="margin-bottom: 0;"></p>
            </div>
            <button type="button" onclick="upload()" id="apply" style="margin-bottom: 20px">적용</button>
        </div>
    </body>
</html>