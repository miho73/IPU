<!DOCTYPE html>

<html lang="ko" xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>로그인 - IPU</title>
		<th:block th:replace="fragments/header-comp.html :: header-comp"></th:block>
		<link rel="stylesheet" type="text/css" href="/lib/auth/signin.css">
		<script th:src="${'https://www.google.com/recaptcha/api.js?render=' + capt_site}"></script>
		<style>
			div.grecaptcha-badge { 
    			visibility: hidden;
				left: 0;
			}
			a.recaptch-a {
				text-decoration: none;
				color: #6495ed;
			}
		</style>
	</head>
	<body>
		<p id="err" th:style="${'display: ' + error_visible}" th:text="${error_text}">다시 시도해주세요.</p>
		<div class="vh-center">
			<form id="login-form" onsubmit="login()" th:action="${'/login?ret='+return}" method="POST">
				<label id="title">로그인</label>
				<input type="text" id="id" class="input" name="id" placeholder="ID" spellcheck="false" required autocomplete="username">
				<input type="password" id="pwd" class="input" name="password" placeholder="Password" spellcheck="false" required autocomplete="current-password">
				<input type="text" id="gtoken" style="display: none;" name="gToken" readonly required>
				<button type="submit" id="submit" class="input">Login</button>
				<input type="text" id="gVers" style="display: none;" name="gVers" th:value="${captcha_version}">
				<div id="captcha" class="g-recaptcha" th:if="${captcha_version.equals('v2')}" th:data-sitekey="${capt_site}" data-theme="dark"></div>
			</form>
		</div>
		<div id="capt-show">This site is protected by reCAPTCHA and the Google <a href="https://policies.google.com/privacy" class="recaptch-a">Privacy Policy</a> and <a href="https://policies.google.com/terms" class="recaptch-a">Terms of Service</a> apply.</div>
	</body>
	<script th:inline="javascript">
		grecaptcha.ready(function() {
			grecaptcha.execute([[${capt_site}]], {action: 'signin'}).then(function(token) {
				document.getElementById('gtoken').value = token;
		  	});
		});
	</script>
</html>